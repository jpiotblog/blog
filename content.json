{"meta":{"title":"Japan IoT Support Blog","subtitle":"","description":"","author":"jpiotblog","url":"https://jpiotblog.github.io","root":"/blog/"},"pages":[],"posts":[{"title":"uwfmgr.exe コマンドの Commit/Commit-Delete サブ オプションについて","slug":"UWF-commit","date":"2020-06-29T08:00:00.000Z","updated":"2020-06-30T02:39:11.295Z","comments":true,"path":"2020/06/29/UWF-commit/","link":"","permalink":"https://jpiotblog.github.io/2020/06/29/UWF-commit/","excerpt":"UWF オーバーレイの保護領域に対して、ファイルやレジストリの変更を反映させる方法についてお纏めします。","text":"UWF オーバーレイの保護領域に対して、ファイルやレジストリの変更を反映させる方法についてお纏めします。 ※ uwfmgr.exe ツールの利用法は、こちら を参照ください。 uwfmgr.exe File Commit/Commit-Delete についてUWF オーバーレイの保護領域に対してファイル操作を行った場合、OS 再起動後にこれらの操作内容がリセットされます。この時、uwfmgr.exe File Commit/Commit-Delete によって、変更内容がリセットされないよう “コミット” することが可能です。コミットしたタイミングの変更内容が実際のシステムに反映されます。 ファイルの作成、変更を反映する場合、uwfmgr.exe file commit を使用します。実行はファイル単位で、正規表現は使用できません。 例 (c:\\temp\\test.txt の変更反映) 1uwfmgr.exe file commit &quot;c:\\temp\\test.txt&quot; ファイルの削除を反映する場合、uwfmgr.exe file commit-delete を使用します。実行はファイル単位ですが、空のフォルダーに対しても使用可能です。正規表現は使用できません。ファイル削除後に実行するのではなく、コマンドを実行によってファイルを削除します。 例 (c:\\temp\\test.txt の削除反映): 1uwfmgr.exe file commit-delete &quot;c:\\temp\\test.txt&quot; 例 (c:\\temp の削除反映 ※ 空のフォルダーである必要があります): 1uwfmgr.exe file commit-delete &quot;c:\\temp&quot; 補足 1:新しくフォルダーを作成し、その配下に作成したファイルに対して uwfmgr file commit を実行した場合、作成したフォルダーを含めてコミットされます。逆に、フォルダー内のファイルを全て uwfmgr file commit-delete で削除後、空のフォルダーを削除する場合には uwfmgr file commit-delete をそのフォルダーに対して実行することでフォルダーの削除がコミットされます。 補足 2:現状、新しく作成したフォルダーのみ (空の状態) をコミットする方法がありません。代替策として、フォルダーの配下に適当なファイルを作成し Commit 実行後、Comite-Delete で削除することでフォルダーのみをコミットしたことと同等の結果を得ることが可能です。 例 (c:\\temp フォルダーのみコミットする場合):1234mkdir c:\\tempecho commit &gt; c:\\temp\\test.txtuwfmgr file commit c:\\temp\\test.txtuwfmgr file commit-delete c:\\temp\\test.txt 2 行目の echo コマンドで commit という文字列を c:\\temp\\test.txt へ標準出力し、ファイルを作成します。3 行目で作成されたファイルをコミットし、4 行目で削除します。 uwfmgr.exe Registry Commit/Commit-Delete についてUWF オーバーレイによってシステムの利用領域を保護している状態でレジストリ キーや値の変更を行った場合、OS 再起動後に変更内容はリセットされます。この時、uwfmgr.exe Registry Commit/Commit-Delete によって、変更内容がリセットされないよう “コミット” することが可能です。コミットしたタイミングの変更内容がシステムに反映されます。 レジストリ キー、値の作成、変更を反映する場合、uwfmgr.exe registry commit を使用します。実行は値単位で、正規表現は使用できません。 例 (HKLM\\SOFTWARE\\test キー配下の値 test の変更反映): 1uwfmgr.exe registry commit &quot;HKLM\\SOFTWARE\\test&quot; test レジストリ キー、値の削除を反映する場合、uwfmgr.exe registry commit-delete を使用します。キーのみを指定して削除を実行することが可能です。レジストリ キー、値を削除後に実行するのではなく、コマンドを実行によって削除します。 例 (HKLM\\Software\\test キー配下の値 test の削除反映): 1uwfmgr.exe registry commit-delete &quot;HKLM\\Software\\test&quot; test 例 (HKLM\\Software\\test キーの削除反映): 1uwfmgr.exe registry commit-delete &quot;HKLM\\Software\\test&quot; 補足:HKCU レジストリ ハイブのキー、サブ キー、値の変更や削除は行えません。その他レジストリ ハイブ ((HKLM\\Software, HKLM\\System, HKLM\\SAM, HKLM\\Security 等) を直接指定して削除することができません。仕様上、実行が拒否されます。 変更履歴2020/06/29 created by Mochizuki","categories":[{"name":"Unified Write Filter","slug":"Unified-Write-Filter","permalink":"https://jpiotblog.github.io/categories/Unified-Write-Filter/"}],"tags":[{"name":"uwfmgr.exe","slug":"uwfmgr-exe","permalink":"https://jpiotblog.github.io/tags/uwfmgr-exe/"}]},{"title":"長期間稼働するシステムでの UWF 有効化について","slug":"UWF-longtermup","date":"2020-02-19T15:00:00.000Z","updated":"2020-06-30T02:39:11.336Z","comments":true,"path":"2020/02/20/UWF-longtermup/","link":"","permalink":"https://jpiotblog.github.io/2020/02/20/UWF-longtermup/","excerpt":"長期間稼働するシステムで UWF を有効化する場合の、一般的な留意事項をご紹介します。","text":"長期間稼働するシステムで UWF を有効化する場合の、一般的な留意事項をご紹介します。 UWF を有効化している環境において、オーバーレイ領域が不足するとシステムが動作しなくなるため、定期的にシステムを再起動してオーバーレイ領域をフラッシュする必要があります。 オーバーレイ領域の消費傾向はその環境のご利用方法に依存します。例えば、新しいファイルの作成や更新が頻繁に行われるシステムでは、オーバーレイが比較的早く消費します。逆に、新しいファイルの作成は行われず、限定された動作のみを行うシステムでは消費は少ないことが想定されます。オーバーレイ領域の消費傾向が把握できていないシステムにおきましては、長期間連続稼働 (例: 24 時間 365 日) を要件するシステムでの UWF 利用はお勧めしません。 システムを再起動せず稼働可能な期間を判断するためには、UWF を有効化して模擬運用を実施し、オーバーレイの消費傾向を把握することをお勧めします。運用が周期的に行われる場合、周期の最大期間 (例: 一週間、または一ヶ月など) を目途に模擬運用を継続ください。消費傾向からシステム再起動タイミングを逆算したり、どのような操作が最もオーバーレイを消費しているかを確認して、利用方法の変更やオーバーレイ領域の拡大をご検討ください。 検討方法例: (1) 一週間または一ヶ月などの運用周期となる期間、運用試験を実施し、オーバーレイの消費傾向を把握します。 消費量 / 残容量の確認: 12uwfmgr overlay get-consumption uwfmgr overlay get-availablespace (2) 試験結果を基に、システム再起動間隔でオーバーレイが枯渇しないよう設定値を決定します。 例:オーバーレイ消費傾向: 約 200 MB / 日システム再起動間隔 : 一週間毎 7 日 x 200 MB = 1400 MB / 週、ただし操作によっては消費量が増えることを想定して約 2 倍超の 3 GB = 3072 MB と設定 1uwfmgr overlay set-size 3072 一週間通常使用しても警告を出力しないように 1.5 GB = 1536 MB と設定 1uwfmgr overlay set-warningthreshold 1536 重大エラー表示後 2 日間余裕があるように 2.5 GB = 2560 MB と設定 1uwfmgr overlay set-criticalthreshold 2560 RAM 上に 3072 MB を確保するのが難しい場合は Disk オーバーレイを設定 ※ OS 再起動後、set-size で指定したサイズの隠しファイル C:\\uwfswap.sys が作成されます。 1uwfmgr overlay set-type disk 設定を反映させるため OS を再起動 1shutdown -r -t 0 関連する公開情報をご紹介します。 統合書き込みフィルター (UWF) オーバーレイの位置とサイズ Windows 10 の統合書き込みフィルター機能 (UWF) で、フィルターの除外設定を行ってもオーバーレイのメモリを消費してしまう UWF 有効にしてから 6 ヶ月経過すると一部の通知アイコンが表示されない現象について","categories":[{"name":"Unified Write Filter","slug":"Unified-Write-Filter","permalink":"https://jpiotblog.github.io/categories/Unified-Write-Filter/"}],"tags":[{"name":"オーバーレイ","slug":"オーバーレイ","permalink":"https://jpiotblog.github.io/tags/%E3%82%AA%E3%83%BC%E3%83%90%E3%83%BC%E3%83%AC%E3%82%A4/"}]},{"title":"UWF の除外設定について","slug":"UWF-exclusions","date":"2020-02-18T15:00:00.000Z","updated":"2020-06-30T02:39:11.323Z","comments":true,"path":"2020/02/19/UWF-exclusions/","link":"","permalink":"https://jpiotblog.github.io/2020/02/19/UWF-exclusions/","excerpt":"UWF の除外設定を実施するにあたり、留意いただきたい内容をお纏めいたします。","text":"UWF の除外設定を実施するにあたり、留意いただきたい内容をお纏めいたします。 除外設定に関するお問い合わせについてUWF を有効にした環境で OS 再起動後も情報を維持したい製品がある場合、必要な除外設定につきましては対象製品サポートよりご案内させていただきます。 質問例 1. Windows Defender のパターン ファイルの更新を維持したい -&gt; Windows Defender の製品サポートでの対応となります 質問例 2. Wi-Fi の接続情報を維持したい -&gt; Windows OS の製品サポート (ネットワーク担当) での対応となります 除外設定の追加によって何らかの問題が発生した場合、除外対象パスを使用するプロセス側にて調査が必要となります。対象の製品サポートへ事例の有無や対処方法についてお問い合わせください。 除外を推奨しないパスについて一般的な除外設定を以下サイトに纏めて公開しております。除外を推奨しないパスの情報も含まれておりますので、併せてご確認ください。 書き込みフィルターの除外 例えば、システムの起動の初期段階でアクセスするフォルダ (C:\\Windows 配下など) は、他のデータと一貫性を持っているため、一部のフォルダーのみを除外することで問題が発生する場合があります。この一貫性が崩れた場合、システムがハンドルできない問題が発生し 「SYSTEM THREAD EXCEPTION NOT HANDLED」 エラー表示されます。これは、システム内部にて Access violation が発生 (アクセスできる情報としてアクセスしたが、情報が無いか権限が無く失敗) することでシステムの起動が進められなくなるためです。 現在公開情報への追加リクエスト中の内容となりますが、下記情報も併せてご確認ください。 C:\\Windows\\WinSXS フォルダーを除外すると OS 起動時に BSOD が発生する Winodws 10 Enterprise 2019 LTSC では、C:\\Windows\\WinSXS フォルダーを除外するとシステム起動時に 「SYSTEM THREAD EXCEPTION NOT HANDLED」 で BSOD が発生するという報告がございます。C:\\Windows\\WinSXS フォルダー配下にはシステム起動初期にアクセスする情報が含まれておりますため、除外をお勧めいたしません。 Windows Defender 用の除外設定について弊社より提供させていいただいておりますマルウェア対策ソフトウェア (Windows Defender および System Center Endpoint Protection) につきましては、除外設定を下記サイトにて公開しております。 UWF で保護されているデバイスでマルウェア対策のサポート また、これらの除外設定に伴い発生する問題の事例をご紹介します。比較的新しいバージョンの OS (Windows 10 バージョン 1909 以降) におきましては、2020/6/17 現在にて発生報告は確認されておりません。関連すると思われる問題が確認された場合には、Windows Defender 製品サポートへお問い合わせください。 Windows Defender のレジストリを除外すると OS 起動時にハングアップする 下記レジストリ キーを除外していると、OS 起動時にハングアップして起動できない場合があります。レースコンディションによるものであり、スペックの低い端末で発生する傾向にあります。OS 側での修正は困難であるため、Wdfilter の除外解除等をご検討ください。 HKLM\\System\\CurrentControlSet\\Services\\WdFilter HKLM\\SYSTEM\\ControlSet001\\Control\\DeviceClasses{53f5630d-b6bf-11d0-94f2-00a0c91efb8b} Windows 10 Enterprise 2016 LTSB の環境では下記除外が入っていた場合にも同様の問題が発生するという報告があります。該当する場合にはこちらの除外解除もご検討ください。 HKLM\\SOFTWARE\\Classes\\TypeLib{8C389764-F036-48F2-9AE2-88C260DCF43B} HKLM\\SOFTWARE\\Classes\\CLSID{A2D75874-6750-4931-94C1-C99D3BC9D0C7} HKLM\\SOFTWARE\\Classes\\CLSID{195B4D07-3DE2-4744-BBF2-D90121AE785B} 変更履歴2020/02/19 created by Mochizuki2020/06/16 modified by Mochizuki","categories":[{"name":"Unified Write Filter","slug":"Unified-Write-Filter","permalink":"https://jpiotblog.github.io/categories/Unified-Write-Filter/"}],"tags":[{"name":"除外設定","slug":"除外設定","permalink":"https://jpiotblog.github.io/tags/%E9%99%A4%E5%A4%96%E8%A8%AD%E5%AE%9A/"}]},{"title":"UWF を有効化した環境でメモリ ダンプを取得する方法","slug":"UWF-dump-setting","date":"2020-02-11T15:00:00.000Z","updated":"2020-06-30T02:39:11.312Z","comments":true,"path":"2020/02/12/UWF-dump-setting/","link":"","permalink":"https://jpiotblog.github.io/2020/02/12/UWF-dump-setting/","excerpt":"UWF を有効化した環境で、メモリ ダンプを取得する方法についてご紹介します。","text":"UWF を有効化した環境で、メモリ ダンプを取得する方法についてご紹介します。 はじめに 概要 強制メモリ ダンプを取得することで、現象発生時のメモリの状態を Memory.dmp ファイルとして保存し、そこから現象発生時のオペレーティング システムのメモリの状態や、行われていた処理などの詳細を確認することができます。 影響 メモリ ダンプ取得のためのシャットダウン操作は、正常にシステムを停止させる方法ではないことを予めご留意ください。システムが正常に動作しない問題の調査方法として、他に方法が無い場合にご案内させていただいております。運用環境で、且つ回避策がある場合には、極力実施をお勧めいたしません。 再起動の必要性 事前準備時、メモリダンプ採取時に再起動が必要です。 採取ファイル 本手順では “D:\\Dumps\\Memory.dmp” として進めさせていただきます。 事前準備 システム ドライブ以外に、メモリ ダンプを保存するボリュームを追加し、いずれかのドライブとしてマウントします。※ この手順では D: ドライブとします。 事前に UWF フィルターとボリュームの保護を実行します。この過程で PageFile の設定が一旦初期化されます。 実行例: ※ この手順ではシステム ドライブを C: ドライブとします。 123uwfmgr.exe volume protect c: uwfmgr.exe filter enable shutdown -r -t 0 Dump 出力設定手順 UWF フィルターを無効化する。 実行例: 1uwfmgr.exe filter disable PageFile の大きさを 物理メモリ + 300 Mbyte 以上の大きさに設定する。 実行例:a) [エクスプローラ] - [コンピュータ] を右クリックし [プロパティ(R)] をクリックします。b) [システムの詳細設定] をクリックします。c) [詳細設定] タブの [パフォーマンス] にある [設定(S)] をクリックします。d) [詳細設定] タブの [仮想メモリ] の項目にある [変更(C)] ボタンをクリックします。e) この画面にて、[すべてのドライブのページング ファイルのサイズを自動的に管理する(A)] オプションを外します。f) 手順 1) で作成したシステムドライブ以外のドライブ (ここでは D:) をクリックします。g) [カスタムサイズ] にチェックを付け、[初期サイズ]、[最大サイズ] の両方に物理メモリ + 300 Mbyte 以上の値を入力します。 (例えば 4096MB メモリの場合、4396MB)h) その後 [設定] ボタンをクリックし設定を反映させ [OK] ボタンをクリックします。i) “変更結果はコンピューターを再起動しなければ有効になりません。” というポップアップが表示されますので、[OK] ボタンをクリックします。j) “パフォーマンス オプション” のウィンドウも [OK] ボタンにて閉じます。 ※ 補足この設定値は、次のレジストリに反映されます。なお、直接レジストリ値を編集することでも、ページング ファイル サイズを設定することができます。 キー: HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\SessionManager\\MemoryManagement名前: PagingFiles種類: REG_MULTI_SZデータ: &lt;ページ ファイル保存先&gt; &lt;初期サイズ (MB)&gt; &lt;最大サイズ (MB)&gt; (設定例: d:\\pagefile.sys 4396 4396) 完全メモリ ダンプ (Full Dump) が生成されるよう設定する。 a) [エクスプローラ] - [コンピュータ] を右クリックし、[プロパティ] をクリックします。b) 左ペインにある [システムの詳細設定] をクリックします。c) “システムのプロパティ” の [詳細設定] タブの [起動と回復] 枠内にある [設定] ボタンをクリックします。d) “起動と回復” の [デバッグ情報の書き込み] 枠内にあるプルダウン メニューから [完全メモリ ダンプ] を選択し、[OK] ボタンを 2 回クリックします。 [ダンプ ファイル] のパスを変更する。 ※ 注意GUI から [完全メモリ ダンプ] を選択する事と併せて、以下のレジストリ エディタで、次のレジストリの値が設定されている事をご確認ください。 キー: HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\CrashControl名前: CrashDumpEnabled種類: REG_DWORDデータ: 1 メモリ ダンプの出力先は、次のレジストリ値で確認できます。 キー: HKEY_LOCAL_MACHINE\\System\\CurrentControlSet\\Control\\CrashControl名前: DumpFile種類: REG_EXPAND_SZデータ(既定値): D:\\Dumps\\MEMORY.DMP DedicatedDumpFile.sys を設定する。 レジストリ エディタで、次のレジストリの値を設定してください。 キー: HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CrashControl名前: DedicatedDumpFile種類: REG_SZデータ: D:\\dedicateddumpfile.sys キー: HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CrashControl名前: DumpFileSize種類: REG_DWORDデータ: &lt;10 進数でメモリサイズ + 300 MB を設定ください&gt; (設定例: 4396) (オプション) AlwaysKeepMemoryDump を設定する。 Client OS におけるメモリ ダンプでは WorkGroup 環境の場合、ダンプ ファイル格納ボリュームの空き容量が25 GB 未満の場合、ダンプ ファイルが削除される動作となります (Domain 環境の場合、25 GB の制限には合致いたしません)。そのため、対象の端末が Workgroup 環境の場合には、以下のレジストリ値を設定いただき、ダンプ ファイルが上記制限に合致しないよう設定いただく事をご検討いただければと存じます。 キー: HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CrashControl名前: AlwaysKeepMemoryDump種類: REG_DWODデータ : 1 公開情報:Kernel dump storage and clean up behavior in Windows 7 (オプション) キーボードから STOP エラーを発生できるように設定する。 事象発生時にメモリ ダンプの生成を行えるよう、トリガーの設定を行います。レジストリ エディタで、次のレジストリの値を設定してください。 &lt;PS/2 キーボードの場合&gt;キー: HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\i8042prt\\Parameters名前: CrashOnCtrlScroll種類: REG_DWORDデータ: 1 &lt;USB キーボードの場合&gt;キー: HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\kbdhid\\Parameters名前: CrashOnCtrlScroll種類: REG_DWORDデータ: 1 (オプション) NMI スイッチを使用できるように設定する。 Windows の機能ではなく、ご使用のハードウェアにメモリ ダンプ取得のための NMI (Non-Maskable Interrupt) スイッチが備わっている場合、以下にご案内するキーボードでクラッシュさせる方法よりも割り込みレベルが高いため、ご使用いただくことをお勧めします。ご使用のハードウェアに当該機能が備わっているか、また、使用方法につきましては、ハードウェアの取扱説明書、あるいはハードウェアご提供元様にご確認ください。 また、Windows 側の設定として、レジストリ エディタで、次のレジストリの値を設定ください。 キー: HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\CrashControl名前: NMICrashDump種類: REG_DWORDデータ: 1 UWF を有効化し、OS を再起動する。 実行例: 12uwfmgr.exe filter enable shutdown -r -t 0 Dump の出力手順調査対象の事象が発生した際に、NMI もしくはキーボード操作によってメモリ ダンプを出力させます。 取得対象: D:\\Dumps\\Memory.dmp ※ 参考情報 Windows Server 2008 および Windows Server 2008 R2 でカーネルまたは完全メモリ ダンプ ファイルを生成する方法 Overview of memory dump file options for Windows 2000, Windows XP, Windows Server 2003, Windows Vista, Windows Server 2008, Windows 7 and Windows Server 2008 R2 メモリ ダンプ ファイルのオプションは、Windows 2000、Windows XP、Windows Server 2003、Windows Vista、Windows Server 2008、Windows 7 と Windows サーバー 2008 R2 の概要 (機械翻訳) Windows 8 and Windows Server 2012: Automatic Memory Dump (英文のみ) NMI_HARDWARE_FAILURE error when an NMI is triggered on Windows 8 and Windows Server 2012 (英文のみ) Windows の機能により、キーボード操作で Memory.dmp ファイルを作成できる クラッシュ後 Windows でメモリ ダンプ ファイルが保存されない","categories":[{"name":"Unified Write Filter","slug":"Unified-Write-Filter","permalink":"https://jpiotblog.github.io/categories/Unified-Write-Filter/"}],"tags":[{"name":"メモリ ダンプの設定手順","slug":"メモリ-ダンプの設定手順","permalink":"https://jpiotblog.github.io/tags/%E3%83%A1%E3%83%A2%E3%83%AA-%E3%83%80%E3%83%B3%E3%83%97%E3%81%AE%E8%A8%AD%E5%AE%9A%E6%89%8B%E9%A0%86/"}]},{"title":"UWF 関連トラブル時の情報採取手順について","slug":"CollectInfo_UWF","date":"2020-01-25T15:00:00.000Z","updated":"2020-06-30T02:39:11.279Z","comments":true,"path":"2020/01/26/CollectInfo_UWF/","link":"","permalink":"https://jpiotblog.github.io/2020/01/26/CollectInfo_UWF/","excerpt":"トラブル発生時の情報採取手順を記載します。","text":"トラブル発生時の情報採取手順を記載します。 対象事象発生マシン (OS: Windows 10 Enterprise または Windows 10 IoT Core, Windows 10 IoT Enterprise) 事前準備こちら から CollectInfo_UWF.txt ファイルをダウンロードし、拡張子を .txt から .bat に変更、実施対象の任意の場所に格納します。 &lt;実施対象に以下が存在する状態&gt;・ [任意の場所]\\CollectInfo_UWF.bat ファイル 影響ログを採取することで負荷が上がる可能性は考えられますが、基本的に OS リソースや処理への影響はありません。 実行手順(1) 事象発生マシンに管理者アカウントでログオンします。(2) CollectInfo_UWF.bat ファイルを右クリックし、[管理者として実行] を選択します。(3) “実行したい番号を入力ください” メッセージに 1 を入力、リターン キーを押下し、表示に従いメニューに戻ります。(4) “実行したい番号を入力ください” メッセージに q を入力、リターン キーを押下してツールを終了します。(5) デスクトップ上 &lt;YYYYMMDD 形式の年月日&gt;_&lt;ホスト名&gt;_info フォルダーを圧縮し、お問い合わせいただく際にご提供ください。","categories":[{"name":"Unified Write Filter","slug":"Unified-Write-Filter","permalink":"https://jpiotblog.github.io/categories/Unified-Write-Filter/"}],"tags":[{"name":"情報採取手順","slug":"情報採取手順","permalink":"https://jpiotblog.github.io/tags/%E6%83%85%E5%A0%B1%E6%8E%A1%E5%8F%96%E6%89%8B%E9%A0%86/"}]},{"title":"FAQ (Unified Write Filter)","slug":"UWF-FAQ","date":"2020-01-15T15:00:00.000Z","updated":"2020-06-30T02:39:11.332Z","comments":true,"path":"2020/01/16/UWF-FAQ/","link":"","permalink":"https://jpiotblog.github.io/2020/01/16/UWF-FAQ/","excerpt":"UWF 機能に関してよくあるご質問とその回答をまとめております。","text":"UWF 機能に関してよくあるご質問とその回答をまとめております。 製品を理解するために参考となる公開情報を教えて欲しい回答 統合書き込みフィルター (UWF) 機能 機能の概要、要件、制限事項、各機能の紹介など Unified Write Filter (UWF) 機能を使用します。 UWF の有効化方法 統合書き込みフィルター (UWF) オーバーレイの位置とサイズ オーバーレイに関する情報 書き込みフィルターの除外 UWF 機能の除外設定について UWF で保護されているデバイスのサービス UWF を有効化している環境で Windows 更新プロブラムやマルウェア対策ソフトのシグネチャを更新する方法について Unified Write Filter (UWF) のトラブルシューティング トラブルシューティングに関する情報UWF に関する情報採取手順は、こちら を参照ください。 Windows Update 時に CPU が高くならないようにしたい回答 WmiPrvSE.exe プロセスが uwfwmi.dll にて UWF のオーバーレイ ファイルを取得する処理に CPU を消費する傾向があります。こちらは仕様に基づく動作となります。 “UWF Servicing Mode” 実行時に WSUS の設定が参照されないのは不具合か回答 UWF の不具合として、2019 年 9 月 (Windows 10 1903 のみ 2019 年 10 月) の更新プログラムで修正しております。 フィルター有効化時にページファイル (Pagefile.sys) が削除されないようにしたい回答 初回の uwfmgr.exe filter enable コマンドの実行時に Pagefile に関するレジストリ値を操作する処理が実施される為です。回避策としては、uwfmgr.exe filter enable コマンドを実行した後、再起動の直前にもう一度 Pagefile.sys の設定を保護対象ボリュームに対して実施する必要があります。 ※ 適宜追加更新します。","categories":[{"name":"Unified Write Filter","slug":"Unified-Write-Filter","permalink":"https://jpiotblog.github.io/categories/Unified-Write-Filter/"}],"tags":[{"name":"FAQ","slug":"FAQ","permalink":"https://jpiotblog.github.io/tags/FAQ/"}]},{"title":"過去ブログについて","slug":"past-blog","date":"2020-01-11T15:00:00.000Z","updated":"2020-06-30T02:39:11.295Z","comments":true,"path":"2020/01/12/past-blog/","link":"","permalink":"https://jpiotblog.github.io/2020/01/12/past-blog/","excerpt":"過去のブログ情報を紹介いたします。定期的な更新は行われていないため、除外設定等の情報は現在の OS では適用されない場合がございます。恐れ入りますが、予めご留意いただけますようお願い申し上げます。","text":"過去のブログ情報を紹介いたします。定期的な更新は行われていないため、除外設定等の情報は現在の OS では適用されない場合がございます。恐れ入りますが、予めご留意いただけますようお願い申し上げます。 UWF 統合書き込みフィルター (Unified Write Filter (UWF)) について Windows 10 で UWF (Unified Write Filter) とグループ ポリシーによるデバイスのインストール制限を併用する場合の動作について Unified Write Filter (UWF) 環境での運用を考慮した設定について UWF 無効化コマンドが失敗する UWF 有効にしてから 6 ヶ月経過すると一部の通知アイコンが表示されない現象について 統合書き込みフィルター (Unified Write Filter (UWF)) について UWFMGR.EXE コマンド実行時の文字数制限について Windows 10 の統合書き込みフィルター機能 (UWF) で、フィルターの除外設定を行ってもオーバーレイのメモリを消費してしまう","categories":[{"name":"IoT 製品全般","slug":"IoT-製品全般","permalink":"https://jpiotblog.github.io/categories/IoT-%E8%A3%BD%E5%93%81%E5%85%A8%E8%88%AC/"}],"tags":[{"name":"過去ブログ","slug":"過去ブログ","permalink":"https://jpiotblog.github.io/tags/%E9%81%8E%E5%8E%BB%E3%83%96%E3%83%AD%E3%82%B0/"}]},{"title":"jpiotblog について","slug":"about-jpiotblog","date":"2019-12-31T15:00:00.000Z","updated":"2020-06-30T02:39:11.279Z","comments":true,"path":"2020/01/01/about-jpiotblog/","link":"","permalink":"https://jpiotblog.github.io/2020/01/01/about-jpiotblog/","excerpt":"","text":"日本マイクロソフトの IoT 製品 (Device Lockdown 機能含む) に関するサポート情報のブログです。 公開日2020 年 1 月 1 日より公開いたしました。 活動について製品のサポート メンバーによって運用されております。仕様に関する情報やトラブル シューティングの手順、実装におけるワンポイント アドバイスを公開いたします。 留意事項サイトのコンテンツや情報において、可能な限り正確な情報を掲載し、更新するよう努めております。しかしながら、状況の変化や情報が古くなることにより、必ずしもお客様環境に適用できない情報となる場合がございます。恐れ入りますが、予めご留意くださいますようお願い申し上げます。","categories":[{"name":"IoT 製品全般","slug":"IoT-製品全般","permalink":"https://jpiotblog.github.io/categories/IoT-%E8%A3%BD%E5%93%81%E5%85%A8%E8%88%AC/"}],"tags":[{"name":"はじめに","slug":"はじめに","permalink":"https://jpiotblog.github.io/tags/%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB/"}]}]}